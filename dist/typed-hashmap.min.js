(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):factory(global.typedHashMap=global.typedHashMap||{})})(this,function(exports){"use strict";function listCacheClear(){this.__data__=[];this.size=0}function eq(value,other){return value===other||value!==value&&other!==other}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var Symbol$1=root.Symbol;var objectProto$2=Object.prototype;var hasOwnProperty$2=objectProto$2.hasOwnProperty;var nativeObjectToString=objectProto$2.toString;var symToStringTag$1=Symbol$1?Symbol$1.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty$2.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag$1]=tag}else{delete value[symToStringTag$1]}}return result}var objectProto$3=Object.prototype;var nativeObjectToString$1=objectProto$3.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag="[object Null]";var undefinedTag="[object Undefined]";var symToStringTag=Symbol$1?Symbol$1.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}var asyncTag="[object AsyncFunction]";var funcTag="[object Function]";var genTag="[object GeneratorFunction]";var proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto$1=Function.prototype;var funcToString$1=funcProto$1.toString;function toSource(func){if(func!=null){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype;var objectProto$1=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty$1=objectProto$1.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var Map=getNative(root,"Map");var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto$4=Object.prototype;var hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty$3.call(data,key)?data[key]:undefined}var objectProto$5=Object.prototype;var hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty$4.call(data,key)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED$2);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG$1=1;var COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}var Uint8Array=root.Uint8Array;function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var COMPARE_PARTIAL_FLAG$2=1;var COMPARE_UNORDERED_FLAG$1=2;var boolTag="[object Boolean]";var dateTag="[object Date]";var errorTag="[object Error]";var mapTag="[object Map]";var numberTag="[object Number]";var regexpTag="[object RegExp]";var setTag="[object Set]";var stringTag="[object String]";var symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]";var dataViewTag="[object DataView]";var symbolProto=Symbol$1?Symbol$1.prototype:undefined;var symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$2;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$1;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}var isArray=Array.isArray;function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray(){return[]}var objectProto$7=Object.prototype;var propertyIsEnumerable=objectProto$7.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function isObjectLike(value){return value!=null&&typeof value=="object"}var argsTag$1="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag$1}var objectProto$9=Object.prototype;var hasOwnProperty$7=objectProto$9.hasOwnProperty;var propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$7.call(value,"callee")&&!propertyIsEnumerable$1.call(value,"callee")};function stubFalse(){return false}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}var argsTag$2="[object Arguments]";var arrayTag$1="[object Array]";var boolTag$1="[object Boolean]";var dateTag$1="[object Date]";var errorTag$1="[object Error]";var funcTag$1="[object Function]";var mapTag$1="[object Map]";var numberTag$1="[object Number]";var objectTag$1="[object Object]";var regexpTag$1="[object RegExp]";var setTag$1="[object Set]";var stringTag$1="[object String]";var weakMapTag="[object WeakMap]";var arrayBufferTag$1="[object ArrayBuffer]";var dataViewTag$1="[object DataView]";var float32Tag="[object Float32Array]";var float64Tag="[object Float64Array]";var int8Tag="[object Int8Array]";var int16Tag="[object Int16Array]";var int32Tag="[object Int32Array]";var uint8Tag="[object Uint8Array]";var uint8ClampedTag="[object Uint8ClampedArray]";var uint16Tag="[object Uint16Array]";var uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$1]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$6.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}var objectProto$11=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$11;return value===proto}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$10=Object.prototype;var hasOwnProperty$8=objectProto$10.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$8.call(object,key)&&key!="constructor"){result.push(key)}}return result}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var COMPARE_PARTIAL_FLAG$3=1;var objectProto$6=Object.prototype;var hasOwnProperty$5=objectProto$6.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$3,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$5.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}var DataView=getNative(root,"DataView");var Promise$1=getNative(root,"Promise");var Set=getNative(root,"Set");var WeakMap=getNative(root,"WeakMap");var mapTag$2="[object Map]";var objectTag$2="[object Object]";var promiseTag="[object Promise]";var setTag$2="[object Set]";var weakMapTag$1="[object WeakMap]";var dataViewTag$2="[object DataView]";var dataViewCtorString=toSource(DataView);var mapCtorString=toSource(Map);var promiseCtorString=toSource(Promise$1);var setCtorString=toSource(Set);var weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$2||Map&&getTag(new Map)!=mapTag$2||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$2||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag$2?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$2;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var COMPARE_PARTIAL_FLAG=1;var argsTag="[object Arguments]";var arrayTag="[object Array]";var objectTag="[object Object]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag$1(object),othTag=othIsArr?arrayTag:getTag$1(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function isEqual(value,other){return baseIsEqual(value,other)}var NodeType;(function(NodeType){NodeType[NodeType["EMPTY"]=0]="EMPTY";NodeType[NodeType["LEAF"]=1]="LEAF";NodeType[NodeType["COLLISION"]=2]="COLLISION";NodeType[NodeType["INDEX"]=3]="INDEX";NodeType[NodeType["ARRAY"]=4]="ARRAY"})(NodeType||(NodeType={}));var NOTHING=Object.create(null);function replace(index,value,array){var length=array.length;var newArray=Array(length);for(var i=0;i<length;++i){newArray[i]=array[i]}newArray[index]=value;return newArray}function remove(index,array){var length=array.length;if(length===0||index>=length)return array;if(length===1)return[];var newArray=Array(length-1);var i=0;for(;i<index;++i)newArray[i]=array[i];for(i=i+1;i<length;++i)newArray[i-1]=array[i];return newArray}function insert(index,value,array){var length=array.length;var newArray=Array(length-1);var i=0;for(;i<index;++i)newArray[i]=array[i];newArray[i++]=value;for(;i<length;++i)newArray[i]=array[i-1];return newArray}var SIZE=5;var BUCKET_SIZE=Math.pow(2,SIZE);var MASK=BUCKET_SIZE-1;var MAX_INDEX_NODE=BUCKET_SIZE/2;var MIN_ARRAY_NODE=BUCKET_SIZE/4;function hammingWeight(num){num=num-(num>>1&1431655765);num=(num&858993459)+(num>>2&858993459);return(num+(num>>4)&252645135)*16843009>>24}function hashFragment(shift,hash){return hash>>>shift&MASK}function toBitmap(num){return 1<<num}function bitmapToIndex(shift,bitmap){return hammingWeight(shift&bitmap-1)}function stringHash(str){var hash=0;for(var i=0;i<str.length;++i)hash=(hash<<5)-hash+str.charCodeAt(i)|0;return hash}function newCollisionList(hash,list,get,key,size){var length=list.length;for(var i=0;i<length;++i){var child=list[i];if(child.key===key){var value=child.value;var newValue_1=get(value);if(newValue_1===value)return list;if(newValue_1===NOTHING){--size.value;return remove(i,list)}return insert(i,new LeafNode(hash,key,newValue_1),list)}}var newValue=get();if(newValue===NOTHING)return list;++size.value;return insert(length,new LeafNode(hash,key,newValue),list)}var CollisionNode=function(){function CollisionNode(hash,children){this.type=NodeType.COLLISION;this.hash=hash;this.children=children}CollisionNode.prototype.modify=function(shift,get,hash,key,size){if(hash===this.hash){var list=newCollisionList(this.hash,this.children,get,key,size);if(list===this.children)return this;return list.length>1?new CollisionNode(this.hash,list):list[0]}var value=get();if(value===NOTHING)return this;++size.value;return combineLeafNodes(shift,this.hash,this,hash,new LeafNode(hash,key,value))};return CollisionNode}();function toIndexNode(count,index,children){var newChildren=new Array(count-1);var g=0;var bitmap=0;for(var i=0;i<children.length;++i){if(i!==index){var child=children[i];if(child&&child.type>NodeType.EMPTY){newChildren[g++]=child;bitmap|=1<<i}}}return new IndexedNode(bitmap,newChildren)}var ArrayNode=function(){function ArrayNode(size,children){this.type=NodeType.ARRAY;this.size=size;this.children=children}ArrayNode.prototype.modify=function(shift,get,hash,key,size){var _a=this,count=_a.size,children=_a.children;var fragment=hashFragment(shift,hash);var child=children[fragment];var newChild=(child||empty()).modify(shift+SIZE,get,hash,key,size);if(child===newChild)return this;if(isEmptyNode(child)&&!isEmptyNode(newChild))return new ArrayNode(count+1,replace(fragment,newChild,children));if(!isEmptyNode(child)&&isEmptyNode(newChild))return count-1<=MIN_ARRAY_NODE?toIndexNode(count,fragment,children):new ArrayNode(count-1,replace(fragment,empty(),children));return new ArrayNode(count,replace(fragment,newChild,children))};return ArrayNode}();function isEmptyNode(node){return node&&node.type===NodeType.EMPTY}function toArrayNode(fragment,child,bitmap,children){var array=[];var bit=bitmap;var count=0;for(var i=0;bit;++i){if(bit&1)array[i]=children[count++];bit>>>=1}array[fragment]=child;return new ArrayNode(count+1,array)}var IndexedNode=function(){function IndexedNode(mask,children){this.type=NodeType.INDEX;this.mask=mask;this.children=children}IndexedNode.prototype.modify=function(shift,get,hash,key,size){var _a=this,mask=_a.mask,children=_a.children;var fragment=hashFragment(shift,hash);var bit=toBitmap(fragment);var index=bitmapToIndex(mask,bit);var exists=Boolean(mask&bit);var current=exists?children[index]:empty();var child=current.modify(shift+SIZE,get,hash,key,size);if(current===child)return this;if(exists&&child.type===NodeType.EMPTY){var bitmap=mask&~bit;if(!bitmap)return empty();return children.length<=2&&isLeaf(children[index^1])?children[index^1]:new IndexedNode(bitmap,remove(index,children))}if(!exists&&child.type!==NodeType.EMPTY){return children.length>=MAX_INDEX_NODE?toArrayNode(fragment,child,mask,children):new IndexedNode(mask|bit,insert(index,child,children))}return new IndexedNode(mask,replace(index,child,children))};return IndexedNode}();function isLeaf(node){var type=node.type;return type===NodeType.EMPTY||type===NodeType.LEAF||type===NodeType.COLLISION}function combineLeafNodes(shift,hash1,leafNode1,hash2,leafNode2){if(hash1===hash2)return new CollisionNode(hash1,[leafNode2,leafNode1]);var fragment1=hashFragment(shift,hash1);var fragment2=hashFragment(shift,hash2);return new IndexedNode(toBitmap(fragment1)|toBitmap(fragment2),fragment1===fragment2?[combineLeafNodes(shift+SIZE,hash1,leafNode1,hash2,leafNode2)]:fragment1<fragment2?[leafNode1,leafNode2]:[leafNode2,leafNode1])}var LeafNode=function(){function LeafNode(hash,key,value){this.type=NodeType.LEAF;this.hash=hash;this.key=key;this.value=value}LeafNode.prototype.modify=function(shift,get,hash,key,size){if(key===this.key){var value_1=get(this.value);if(value_1===this.value)return this;if(value_1===NOTHING){--size.value;return empty()}return new LeafNode(hash,key,value_1)}var value=get();if(value===NOTHING)return this;++size.value;return combineLeafNodes(shift,this.hash,this,hash,new LeafNode(hash,key,value))};return LeafNode}();var EmptyNode=function(){function EmptyNode(){this.type=NodeType.EMPTY}EmptyNode.prototype.modify=function(shift,get,hash,key,size){var value=get(void shift);if(value===NOTHING)return this;++size.value;return new LeafNode(hash,key,value)};return EmptyNode}();var EMPTY=new EmptyNode;function empty(){return EMPTY}function getNode(map){return map.node}function getHash(defaultValue,hash,key,map){var node=getNode(map);var shift=0;while(true)switch(node.type){case NodeType.LEAF:return isEqual(key,node.key)?node.value:defaultValue;case NodeType.COLLISION:{if(hash===node.hash){var children=node.children;for(var i=0;i<children.length;++i){var child=children[i];if(isEqual(key,child.key))return child.value}return defaultValue}}case NodeType.INDEX:{var fragment=hashFragment(shift,hash);var bit=toBitmap(fragment);if(node.mask&bit){var i=bitmapToIndex(node.mask,bit);node=node.children[i];shift+=SIZE;break}return defaultValue}case NodeType.ARRAY:{node=node.children[hashFragment(shift,hash)];if(node){shift+=SIZE;break}return defaultValue}default:return defaultValue}}function setTree(node,size,map){return node===getNode(map)?map:new HashMap(node,size)}function findHash(key){var hash=typeof key==="number"?key:typeof key==="string"?stringHash(key):Math.abs(stringHash(JSON.stringify(key)));return hash}function getSize(map){return map.size}var constant=function(x){return function(){return x}};function setKeyValue(key,value,map){var hash=findHash(key);var size={value:getSize(map)};var newNode=getNode(map).modify(0,constant(value),hash,key,size);return setTree(newNode,size.value,map)}function iterator(node,f){return new HashMapIterator(lazyVisit(node,f,[]))}var HashMapIterator=function(){function HashMapIterator(_iterate){this._iterate=_iterate}HashMapIterator.prototype.next=function(){if(!this._iterate)return{done:true,value:null};var _a=this._iterate,value=_a.value,rest=_a.rest;this._iterate=continuation(rest);return{done:false,value:value}};HashMapIterator.prototype[Symbol.iterator]=function(){return this};return HashMapIterator}();var continuation=function(k){return k&&lazyVisitChildren(k[0],k[1],k[2],k[3],k[4])};function lazyVisit(node,f,k){switch(node.type){case NodeType.LEAF:return{value:f(node),rest:k};case NodeType.COLLISION:case NodeType.ARRAY:case NodeType.INDEX:var children=node.children;return lazyVisitChildren(children.length,children,0,f,k);default:return continuation(k)}}function lazyVisitChildren(length,children,index,f,k){while(index<length){var child=children[index++];if(child&&notEmptyNode(child))return lazyVisit(child,f,[length,children,index,f,k])}return continuation(k)}function notEmptyNode(node){return node&&node.type!==NodeType.EMPTY}function fold(f,seed,map){var node=getNode(map);if(node.type===NodeType.EMPTY)return seed;if(node.type===NodeType.LEAF)return f(seed,node.value,node.key);var nodesToVisit=[node.children];var children;while(children=nodesToVisit.shift()){for(var i=0;i<children.length;++i){var child=children[i];if(!child)continue;if(child.type===NodeType.EMPTY)continue;else if(child.type===NodeType.LEAF)seed=f(seed,child.value,child.key);else nodesToVisit.push(child.children)}}return seed}function entries(map){return iterator(getNode(map),nodeEntries)}function nodeEntries(node){return[node.key,node.value]}var HashMap=function(){function HashMap(node,size){this.node=node;this.size=size}HashMap.prototype[Symbol.iterator]=function(){return entries(this)};return HashMap}();var EMPTY_MAP=new HashMap(EMPTY,0);function empty$1(){return EMPTY_MAP}function get(key,map){var hash=findHash(key);if(map)return getHash(null,hash,key,map);return function getValueFromMap(_map){return getHash(null,hash,key,_map)}}function has(key,map){var hash=findHash(key);if(map)return getHash(NOTHING,hash,key,map)!==NOTHING;return function getValueFromMap(_map){return getHash(NOTHING,hash,key,_map)!==NOTHING}}function curry1(fn){function curried(a){switch(arguments.length){case 0:return curried;default:return fn(a)}}return curried}function curry2(fn){function curried(a,b){switch(arguments.length){case 0:return curried;case 1:return curry1(function(b){return fn(a,b)});default:return fn(a,b)}}return curried}function curry3(fn){function curried(a,b,c){switch(arguments.length){case 0:return curried;case 1:
return curry2(function(b,c){return fn(a,b,c)});case 2:return curry1(function(c){return fn(a,b,c)});default:return fn(a,b,c)}}return curried}var set=curry3(setKeyValue);function fromArray(array){var map=empty$1();for(var i=0;i<array.length;++i){var _a=array[i],key=_a[0],value=_a[1];map=set(key,value,map)}return map}function fromIterable(iterable){return fromArray(Array.from(iterable))}function fromObject(object){var keys=Object.keys(object);var map=empty$1();for(var i=0;i<keys.length;++i){var key=keys[i];var value=object[key];map=set(key,value,map)}return map}function size(map){return getSize(map)}function remove$1(key,map){if(map)return setKeyValue(key,NOTHING,map);return function(_map){return setKeyValue(key,NOTHING,_map)}}function keys$2(map){return iterator(getNode(map),nodeKeys)}function nodeKeys(node){return node.key}function values(map){return iterator(getNode(map),nodeValues)}function nodeValues(node){return node.value}var reduce=curry3(fold);var forEach=curry2(function forEach(f,map){reduce(function(_,value,key){return f(value,key)},null,map);return map});var filter=curry2(function filter(predicate,hashmap){return reduce(function(newMap,value,key){return predicate(value,key)?set(key,value,newMap):newMap},empty$1(),hashmap)});var map=curry2(function map(f,hashmap){return reduce(function(newMap,value,key){return set(key,f(value,key),newMap)},empty$1(),hashmap)});exports.HashMap=HashMap;exports.empty=empty$1;exports.get=get;exports.has=has;exports.set=set;exports.fromArray=fromArray;exports.fromIterable=fromIterable;exports.fromObject=fromObject;exports.size=size;exports.remove=remove$1;exports.entries=entries;exports.keys=keys$2;exports.values=values;exports.reduce=reduce;exports.forEach=forEach;exports.filter=filter;exports.map=map;Object.defineProperty(exports,"__esModule",{value:true})});